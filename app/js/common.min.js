function plusVector(a,t){return[a[0]+t[0],a[1]+t[1]]}function minusVector(a,t){return[a[0]-t[0],a[1]-t[1]]}function lengthVector(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))}function distanceTwoVector(a,t){return lengthVector(minusVector(a,t))}var width=window.innerWidth,height=window.innerHeight,app,colors=[17],gravity=4,figuresAmount=-1,figure=[],startBallX=300,startBallY=300,curentPosX=0,curentPosY=0,radius=60,agree=-30,mouselastX=0,mouselastY=0,speed=1,lastspeed,model={createCanvas:function(){app=new PIXI.Application(width,height),document.body.appendChild(app.view)},drawCircle:function(a,t){rand=Math.floor(Math.random()*colors.length);var e=new PIXI.Graphics;return e.lineStyle(0),e.beginFill(colors[rand],1),e.drawCircle(a,t,radius),e.endFill(),e.interactive=!0,e.buttonMode=!0,e.live=!0,figure.push(e),app.stage.addChild(e),e.on("pointerdown",controller.clearFigure),e},gameOver:function(){var a=new PIXI.TextStyle({fill:"0xffffff",fontSize:36}),t=new PIXI.Text("Game Over",a);t.x=width/2,t.y=height/2,t.pivot.x=50,t.pivot.y=50,app.stage.addChild(t)}},firstplayer={createPlayer:function(){player=model.drawCircle(0,0),player.mousemove=function(a){player.position.x=a.data.originalEvent.x,player.position.y=a.data.originalEvent.y,firstplayer.speed(a.data.originalEvent.x,a.data.originalEvent.y)}},speed:function(a,t){lastspeed=Math.sqrt(Math.pow(Math.abs(a-mouselastX),2)+Math.pow(Math.abs(t-mouselastY),2)),mouselastX=a,mouselastY=t}},ball={createBall:function(){balls=model.drawCircle(startBallX,startBallY)},moveBall:function(a,t){balls.position.x+=a,balls.position.y+=t,vall.checkAboard(balls.position.x,balls.position.y),ball.radiusArea(player.position.x,player.position.y)<2*radius&&ball.contactBall()},positionBall:function(a,t){curentPosX=Math.cos(Math.PI*a/180)*t,curentPosY=Math.cos(Math.PI*(90-a)/180)*t,ball.moveBall(curentPosX,curentPosY)},radiusArea:function(a,t){var e=Math.abs(a-balls.position.x-startBallX),l=Math.abs(t-balls.position.y-startBallY);return Math.sqrt(Math.pow(e,2)+Math.pow(l,2))},contactBall:function(){var a=player.position.x-balls.position.x-startBallX,t=player.position.y-balls.position.y-startBallY;cutline=Math.atan(t/a),changecut=180*cutline/Math.PI,console.log(180*cutline/Math.PI),t>=0&&(agree+=changecut),t<0&&(agree+=changecut+180),speed=lastspeed}},vall={checkAboard:function(a,t){a+=startBallX+radius,t+=startBallY+radius,(a>width||a<2*radius)&&(agree+=180-2*agree),(t>height||t<2*radius)&&(agree-=2*agree)}},view={loadGame:function(){model.createCanvas(),firstplayer.createPlayer(),ball.createBall(),app.ticker.add(function(){ball.positionBall(agree,0)})}},controller={clearFigure:function(){this.clear(),figure[this.num].live=!1}};view.loadGame();