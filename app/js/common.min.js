function plusVector(t,e){return[t[0]+e[0],t[1]+e[1]]}function minusVector(t,e){return[t[0]-e[0],t[1]-e[1]]}function lengthVector(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function distanceTwoVector(t,e){return lengthVector(minusVector(t,e))}function multiplexVector(t,e){return t[0]*e[0]+t[1]*e[1]}function multiplexVectorConstant(t,e){return[t[0]*e,t[1]*e]}function angleReflextion(t,e){return minusVector(t,multiplexVectorConstant(multiplexVectorConstant(e,multiplexVector(t,e)/multiplexVector(e,e)),2))}function return90Vector(t){return[-t[1],t[0]]}function return180Vector(t){return multiplexVectorConstant(t,-1)}var app,gravity=4,figuresAmount=-1,figure=[],startBallX=300,startBallY=300,curentPosX=0,curentPosY=0,agree=-30,mouselastX=0,mouselastY=0,speed=1,model={createCanvas:function(){app=new PIXI.Application(vall.width,vall.height),document.body.appendChild(app.view)},drawCircle:function(t){var e=new PIXI.Graphics;return e.lineStyle(0),e.beginFill(17,1),e.drawCircle(t[0],t[1],ball.radius),e.endFill(),e.interactive=!0,e.buttonMode=!0,e.live=!0,figure.push(e),app.stage.addChild(e),e.on("pointerdown",controller.clearFigure),e},gameOver:function(){var t=new PIXI.TextStyle({fill:"0xffffff",fontSize:36}),e=new PIXI.Text("Game Over",t);e.x=width/2,e.y=height/2,e.pivot.x=50,e.pivot.y=50,app.stage.addChild(e)}},firstplayer={mousePosition:[0,0],lastPosition:[0,0],lastSpeedValue:[0,0],createPlayer:function(){player=model.drawCircle(0,0),player.mousemove=function(t){firstplayer.mousePosition=[t.data.originalEvent.x,t.data.originalEvent.y],player.position.x=firstplayer.mousePosition[0],player.position.y=firstplayer.mousePosition[1],firstplayer.lastspeed()}},lastspeed:function(){this.lastSpeedValue=minusVector(this.lastPosition,this.mousePosition),this.lastPosition=this.mousePosition,console.log(this.lastSpeedValue)}},ball={radius:60,position:[200,200],speed:[11,11],acceleration:.999,createBall:function(){balls=model.drawCircle([0,0])},positionvector:function(){this.speedvector(),this.position=plusVector(this.position,this.speed),balls.position.x=this.position[0],balls.position.y=this.position[1]},speedvector:function(){this.speed=multiplexVectorConstant(this.speed,this.acceleration)},move:function(){var t=vall.checkAboard(this.position),e=distanceTwoVector(this.position,firstplayer.mousePosition);for(t&&(this.speed=angleReflextion(this.speed,t)),e<2*this.radius&&(this.speed=angleReflextion(this.speed,minusVector(ball.position,firstplayer.mousePosition)),this.speed=plusVector(this.speed,firstplayer.lastSpeedValue)),e=distanceTwoVector(this.position,firstplayer.mousePosition);e<2*this.radius;)e=distanceTwoVector(this.position,firstplayer.mousePosition),this.positionvector();ball.positionvector()}},vall={width:window.innerWidth,height:window.innerHeight,checkAboard:function(t){return t[0]+ball.radius>this.width?[this.width,0]:t[0]<ball.radius?[-this.width,0]:t[1]+ball.radius>this.height?[0,this.height]:t[1]<ball.radius?[0,-this.height]:void 0}},view={loadGame:function(){model.createCanvas(),firstplayer.createPlayer(),ball.createBall(),app.ticker.add(function(){ball.move()})}},controller={clearFigure:function(){this.clear(),figure[this.num].live=!1}};view.loadGame();